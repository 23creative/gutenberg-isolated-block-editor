{"version":3,"sources":["../../../../../src/components/collaborative-editing/components/avatars/index.js"],"names":["CollaborativeEditingAvatars","peers","MAX_AVATAR_COUNT","slice","map","peer","id","length","CollaborativeEditingAvatar","isVisible","setIsVisible","name","borderColor","color","background","avatarUrl","charAt","CollaborativeEditingAvatarsOverflow","MAX_NAME_COUNT","NameList","select","getPeers","Object","keys"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Popover, VisuallyHidden } from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\n\nimport './style.scss';\n\n/**\n * @param {object} props\n * @param {import(\"../..\").AvailablePeer[]} props.peers\n */\nexport function CollaborativeEditingAvatars( { peers } ) {\n\tconst MAX_AVATAR_COUNT = 3;\n\n\treturn (\n\t\t<div className=\"iso-editor-collab-avatars\">\n\t\t\t<VisuallyHidden>Currently editing:</VisuallyHidden>\n\n\t\t\t{ peers.slice( 0, MAX_AVATAR_COUNT ).map( ( peer ) => (\n\t\t\t\t<CollaborativeEditingAvatar key={ peer.id } peer={ peer } />\n\t\t\t) ) }\n\n\t\t\t{ peers.length > MAX_AVATAR_COUNT && (\n\t\t\t\t<CollaborativeEditingAvatarsOverflow peers={ peers?.slice( MAX_AVATAR_COUNT ) } />\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport function CollaborativeEditingAvatar( { peer } ) {\n\tconst [ isVisible, setIsVisible ] = useState( false );\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"iso-editor-collab-avatars__avatar\"\n\t\t\taria-label={ peer.name }\n\t\t\tonMouseEnter={ () => setIsVisible( true ) }\n\t\t\tonMouseLeave={ () => setIsVisible( false ) }\n\t\t\tstyle={ {\n\t\t\t\tborderColor: peer.color,\n\t\t\t\tbackground: peer.color,\n\t\t\t} }\n\t\t>\n\t\t\t{ isVisible && (\n\t\t\t\t<Popover className=\"iso-editor-collab-avatars__popover\" animate={ false }>\n\t\t\t\t\t{ peer.name }\n\t\t\t\t</Popover>\n\t\t\t) }\n\t\t\t{ peer.avatarUrl ? (\n\t\t\t\t<img className=\"iso-editor-collab-avatars__image\" src={ peer.avatarUrl } alt=\"\" />\n\t\t\t) : (\n\t\t\t\t<span className=\"iso-editor-collab-avatars__name-initial\">{ peer.name.charAt( 0 ) }</span>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport function CollaborativeEditingAvatarsOverflow( { peers } ) {\n\tconst MAX_NAME_COUNT = 20;\n\tconst [ isVisible, setIsVisible ] = useState( false );\n\n\tconst NameList = () => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<ul className=\"iso-editor-collab-avatars__overflow-list\">\n\t\t\t\t\t{ peers.slice( 0, MAX_NAME_COUNT ).map( ( peer ) => (\n\t\t\t\t\t\t<li className=\"iso-editor-collab-avatars__overflow-list-item\" key={ peer.id }>\n\t\t\t\t\t\t\t{ peer.name }\n\t\t\t\t\t\t</li>\n\t\t\t\t\t) ) }\n\t\t\t\t</ul>\n\t\t\t\t{ peers.length > MAX_NAME_COUNT && (\n\t\t\t\t\t<p className=\"iso-editor-collab-avatars__overflow-more\">\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: number of how many more users there are */\n\t\t\t\t\t\t\t__( 'and %s more' ),\n\t\t\t\t\t\t\tpeers.length - MAX_NAME_COUNT\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div className=\"iso-editor-collab-avatars__overflow\">\n\t\t\t{ isVisible && (\n\t\t\t\t<Popover className=\"iso-editor-collab-avatars__popover\" animate={ false }>\n\t\t\t\t\t<NameList />\n\t\t\t\t</Popover>\n\t\t\t) }\n\t\t\t<span\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tonMouseEnter={ () => setIsVisible( true ) }\n\t\t\t\tonMouseLeave={ () => setIsVisible( false ) }\n\t\t\t>\n\t\t\t\t{ `+${ peers.length }` }\n\t\t\t</span>\n\t\t\t<VisuallyHidden>\n\t\t\t\t<NameList />\n\t\t\t</VisuallyHidden>\n\t\t</div>\n\t);\n}\n\nexport default withSelect( ( select ) => {\n\tconst peers = select( 'isolated/editor' ).getPeers();\n\n\treturn {\n\t\tpeers: Object.keys( peers ).map( ( id ) => {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\t...peers[ id ],\n\t\t\t};\n\t\t} ),\n\t};\n} )( CollaborativeEditingAvatars );\n"],"file":"index.js"}