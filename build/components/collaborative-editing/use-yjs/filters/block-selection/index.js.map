{"version":3,"sources":["../../../../../../src/components/collaborative-editing/use-yjs/filters/block-selection/index.js"],"names":["addSelectionBorders","OriginalComponent","props","isSelected","select","peers","getPeers","Object","values","some","peer","start","clientId","end","undefined","addFilterCollabBlockSelection"],"mappings":";;;;;;;;;;;AAGA;;AACA;;AAEA;;;;AANA;AACA;AACA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMA,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAEC,iBAAF,EAAyB;AACpD,SAAO,UAAEC,KAAF,EAAa;AACnB,QAAMC,UAAU,GAAG,qBAClB,UAAEC,MAAF,EAAc;AACb,UAAMC,KAAK,GAAGD,MAAM,CAAE,iBAAF,CAAN,CAA4BE,QAA5B,EAAd;AACA,aAAOC,MAAM,CAACC,MAAP,CAAeH,KAAf,EAAuBI,IAAvB,CACN,UAAEC,IAAF;AAAA;;AAAA,eAAY,gBAAAA,IAAI,CAACC,KAAL,4DAAYC,QAAZ,MAAyBV,KAAK,CAACU,QAA/B,IAA2C,cAAAF,IAAI,CAACG,GAAL,wDAAUD,QAAV,MAAuBV,KAAK,CAACU,QAApF;AAAA,OADM,CAAP;AAGA,KANiB,EAOlB,CAAEV,KAAK,CAACU,QAAR,CAPkB,CAAnB;AASA,WACC,cAAC,iBAAD,gCACMV,KADN;AAEC,MAAA,SAAS,EAAGC,UAAU,GAAG,oCAAH,GAA0CW;AAFjE,OADD;AAMA,GAhBD;AAiBA,CAlBD;;AAoBO,IAAMC,6BAA6B,GAAG,SAAhCA,6BAAgC,GAAM;AAClD,wBAAW,uBAAX,EAAoC,uBAApC,EAA6Df,mBAA7D;AACA,CAFM","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\n\nimport './style.scss';\n\n/**\n * Adds peer selected className to the block-list-block component.\n *\n * @param {Object} OriginalComponent The original BlockListBlock component.\n * @return {Object} The enhanced component.\n */\nconst addSelectionBorders = ( OriginalComponent ) => {\n\treturn ( props ) => {\n\t\tconst isSelected = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst peers = select( 'isolated/editor' ).getPeers();\n\t\t\t\treturn Object.values( peers ).some(\n\t\t\t\t\t( peer ) => peer.start?.clientId === props.clientId && peer.end?.clientId === props.clientId\n\t\t\t\t);\n\t\t\t},\n\t\t\t[ props.clientId ]\n\t\t);\n\t\treturn (\n\t\t\t<OriginalComponent\n\t\t\t\t{ ...props }\n\t\t\t\tclassName={ isSelected ? 'is-iso-editor-collab-peer-selected' : undefined }\n\t\t\t/>\n\t\t);\n\t};\n};\n\nexport const addFilterCollabBlockSelection = () => {\n\taddFilter( 'editor.BlockListBlock', 'isolated-block-editor', addSelectionBorders );\n};\n"],"file":"index.js"}