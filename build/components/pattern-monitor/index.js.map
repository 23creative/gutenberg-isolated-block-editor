{"version":3,"sources":["../../../src/components/pattern-monitor/index.js"],"names":["PatternMonitor","props","currentPattern","updateBlocksWithoutUndo","content","select","getCurrentPattern","dispatch"],"mappings":";;;;;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AARA;AACA;AACA;;AAQA;;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,cAAT,CAAyBC,KAAzB,EAAiC;AAAA,MACxBC,cADwB,GACoBD,KADpB,CACxBC,cADwB;AAAA,MACRC,uBADQ,GACoBF,KADpB,CACRE,uBADQ,EAGhC;;AACA,0BAAW,YAAM;AAChB,QAAKD,cAAc,KAAK,IAAxB,EAA+B;AAC9B;AACA;;AAEDC,IAAAA,uBAAuB,CAAE,mBAAOD,cAAc,CAACE,OAAtB,CAAF,CAAvB;AACA,GAND,EAMG,CAAEF,cAAF,CANH;AAQA,SAAO,IAAP;AACA;;eAEc,sBAAS,CACvB,sBAAY,UAAEG,MAAF,EAAc;AAAA,gBACKA,MAAM,CAAE,iBAAF,CADX;AAAA,MACjBC,iBADiB,WACjBA,iBADiB;;AAGzB,SAAO;AACNJ,IAAAA,cAAc,EAAEI,iBAAiB;AAD3B,GAAP;AAGA,CAND,CADuB,EAQvB,wBAAc,UAAEC,QAAF,EAAgB;AAAA,kBACOA,QAAQ,CAAE,iBAAF,CADf;AAAA,MACrBJ,uBADqB,aACrBA,uBADqB;;AAG7B,SAAO;AACNA,IAAAA,uBAAuB,EAAvBA;AADM,GAAP;AAGA,CAND,CARuB,CAAT,EAeVH,cAfU,C","sourcesContent":["/**\n * WordPress dependencies\n */\n\nimport { __ } from '@wordpress/i18n';\nimport { useEffect } from '@wordpress/element';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { parse } from '@wordpress/blocks';\n\n/** @typedef {import('../../index').BlockEditorSettings} BlockEditorSettings */\n/** @typedef {import('../../store/editor/reducer').Pattern} Pattern */\n\n/**\n * Update callback\n * @callback OnUpdate\n * @param {object[]} blocks - Editor content to save\n */\n\n/**\n * Sets up Gutenberg and the Isolated Block Editor\n *\n * An initial setup is performed, and is then reset each time the editor is focussed. This ensures we are applying the right\n * settings for this particular editor.\n *\n * @param {object} props - Component props\n * @param {BlockEditorSettings} props.settings - Settings\n * @param {Pattern} props.currentPattern - Currently selected pattern\n * @param {OnUpdate} props.updateBlocksWithoutUndo - Callback to update blocks\n */\nfunction PatternMonitor( props ) {\n\tconst { currentPattern, updateBlocksWithoutUndo } = props;\n\n\t// Monitor the current pattern and update the editor content if it changes\n\tuseEffect( () => {\n\t\tif ( currentPattern === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tupdateBlocksWithoutUndo( parse( currentPattern.content ) );\n\t}, [ currentPattern ] );\n\n\treturn null;\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getCurrentPattern } = select( 'isolated/editor' );\n\n\t\treturn {\n\t\t\tcurrentPattern: getCurrentPattern(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { updateBlocksWithoutUndo } = dispatch( 'isolated/editor' );\n\n\t\treturn {\n\t\t\tupdateBlocksWithoutUndo,\n\t\t};\n\t} ),\n] )( PatternMonitor );\n"],"file":"index.js"}