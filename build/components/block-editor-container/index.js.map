{"version":3,"sources":["../../../src/components/block-editor-container/index.js"],"names":["SIZE_LARGE","SIZE_MEDIUM","BlockEditorContainer","props","children","settings","onSave","className","onError","renderMoreMenu","onLoad","isEditorReady","editorMode","isEditing","setEditing","hasFixedToolbar","resizeListener","width","classes","select","getEditorMode","isFeatureActive","dispatch"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\n\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { compose, useResizeObserver } from '@wordpress/compose';\nimport { ErrorBoundary } from '@wordpress/editor';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport ClickOutsideWrapper from './click-outside';\nimport BlockEditorContents from '../block-editor-contents';\nimport HotSwapper from './hot-swapper';\nimport './style.scss';\n\n/** @typedef {import('../../index').BlockEditorSettings} BlockEditorSettings */\n/** @typedef {import('../../index').OnSave} OnSave */\n/** @typedef {import('../../index').OnError} OnError */\n/** @typedef {import('../../index').OnMore} OnMore */\n/** @typedef {import('../../store/editor/reducer').EditorMode} EditorMode */\n/** @typedef {import('../../index').OnLoad} OnLoad */\n\n/**\n * Set editing callback\n * @callback OnSetEditing\n * @param {boolean} isEditing\n */\n\nconst SIZE_LARGE = 720;\nconst SIZE_MEDIUM = 480;\n\n/**\n * Contains the block contents. Handles the hot-swapping of the redux stores, as well as applying the root CSS classes\n *\n * @param {object} props - Component props\n * @param {object} props.children - Child components\n * @param {boolean} props.isEditorReady - The editor is ready for editing\n * @param {boolean} props.isEditing - This editor is being edited in\n * @param {boolean} props.hasFixedToolbar - Has fixed toolbar\n * @param {EditorMode} props.editorMode - 'text' or 'visual'\n * @param {string} props.className - additional class names\n * @param {BlockEditorSettings} props.settings - Settings\n * @param {OnSave} props.onSave - Save callback\n * @param {OnError} props.onError - Error callback\n * @param {OnMore} props.renderMoreMenu - Callback to render additional items in the more menu\n * @param {OnSetEditing} props.setEditing - Set the mode to editing\n * @param {OnLoad} props.onLoad - Load initial blocks\n */\nfunction BlockEditorContainer( props ) {\n\tconst { children, settings, onSave, className, onError, renderMoreMenu, onLoad } = props;\n\tconst { isEditorReady, editorMode, isEditing, setEditing, hasFixedToolbar } = props;\n\tconst [ resizeListener, { width } ] = useResizeObserver();\n\tconst classes = classnames( className, {\n\t\t'iso-editor': true,\n\n\t\t'is-large': width >= SIZE_LARGE,\n\t\t'is-medium': width >= SIZE_MEDIUM && width < SIZE_LARGE,\n\t\t'is-small': width < SIZE_MEDIUM,\n\n\t\t'iso-editor__loading': ! isEditorReady,\n\t\t'iso-editor__selected': isEditing,\n\n\t\t// Match Gutenberg\n\t\t'block-editor': true,\n\t\t'edit-post-layout': true,\n\t\t'has-fixed-toolbar': hasFixedToolbar,\n\t\t[ 'is-mode-' + editorMode ]: true,\n\t} );\n\n\treturn (\n\t\t<div className={ classes }>\n\t\t\t<ErrorBoundary onError={ onError }>\n\t\t\t\t<HotSwapper />\n\n\t\t\t\t{ resizeListener }\n\n\t\t\t\t<ClickOutsideWrapper\n\t\t\t\t\tonOutside={ () => setEditing( false ) }\n\t\t\t\t\tonFocus={ () => ! isEditing && setEditing( true ) }\n\t\t\t\t>\n\t\t\t\t\t<BlockEditorContents\n\t\t\t\t\t\tonSave={ onSave }\n\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\trenderMoreMenu={ renderMoreMenu }\n\t\t\t\t\t\tonLoad={ onLoad }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</BlockEditorContents>\n\t\t\t\t</ClickOutsideWrapper>\n\t\t\t</ErrorBoundary>\n\t\t</div>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { isEditorReady, getEditorMode, isEditing, isFeatureActive } = select( 'isolated/editor' );\n\n\t\treturn {\n\t\t\tisEditorReady: isEditorReady(),\n\t\t\teditorMode: getEditorMode(),\n\t\t\tisEditing: isEditing(),\n\t\t\thasFixedToolbar: isFeatureActive( 'fixedToolbar' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { setEditing } = dispatch( 'isolated/editor' );\n\n\t\treturn {\n\t\t\tsetEditing,\n\t\t};\n\t} ),\n] )( BlockEditorContainer );\n"],"file":"index.js"}