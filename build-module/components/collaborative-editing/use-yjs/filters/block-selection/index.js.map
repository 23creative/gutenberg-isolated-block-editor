{"version":3,"sources":["../../../../../../src/components/collaborative-editing/use-yjs/filters/block-selection/index.js"],"names":["addFilter","useSelect","addSelectionBorders","OriginalComponent","props","isSelected","color","select","peers","getPeers","matchedPeer","Object","values","find","peer","start","clientId","end","undefined","style","addFilterCollabBlockSelection"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,SAAT,QAA0B,kBAA1B;AACA,SAASC,SAAT,QAA0B,iBAA1B;AAEA,OAAO,cAAP;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,mBAAmB,GAAKC,iBAAF,IAAyB;AACpD,SAASC,KAAF,IAAa;AACnB,UAAM;AAAEC,MAAAA,UAAF;AAAcC,MAAAA;AAAd,QAAwBL,SAAS,CACpCM,MAAF,IAAc;AACb,YAAMC,KAAK,GAAGD,MAAM,CAAE,iBAAF,CAAN,CAA4BE,QAA5B,EAAd;AACA,YAAMC,WAAW,GAAGC,MAAM,CAACC,MAAP,CAAeJ,KAAf,EAAuBK,IAAvB,CACjBC,IAAF;AAAA;;AAAA,eAAY,gBAAAA,IAAI,CAACC,KAAL,4DAAYC,QAAZ,MAAyBZ,KAAK,CAACY,QAA/B,IAA2C,cAAAF,IAAI,CAACG,GAAL,wDAAUD,QAAV,MAAuBZ,KAAK,CAACY,QAApF;AAAA,OADmB,CAApB;AAGA,aAAO;AACNX,QAAAA,UAAU,EAAE,CAAC,CAAEK,WADT;AAENJ,QAAAA,KAAK,EAAEI,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEJ;AAFd,OAAP;AAIA,KAVqC,EAWtC,CAAEF,KAAK,CAACY,QAAR,CAXsC,CAAvC;AAaA,WACC,cAAC,iBAAD,eACMZ,KADN;AAEC,MAAA,SAAS,EAAGC,UAAU,GAAG,oCAAH,GAA0Ca,SAFjE;AAGC,MAAA,YAAY,EAAG;AACdC,QAAAA,KAAK,EAAE;AACN,kDAAwCb;AADlC;AADO;AAHhB,OADD;AAWA,GAzBD;AA0BA,CA3BD;;AA6BA,OAAO,MAAMc,6BAA6B,GAAG,MAAM;AAClDpB,EAAAA,SAAS,CAAE,uBAAF,EAA2B,uBAA3B,EAAoDE,mBAApD,EAAyE,CAAzE,CAAT;AACA,CAFM","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\n\nimport './style.scss';\n\n/**\n * Adds peer selected className to the block-list-block component.\n *\n * @param {Object} OriginalComponent The original BlockListBlock component.\n * @return {Object} The enhanced component.\n */\nconst addSelectionBorders = ( OriginalComponent ) => {\n\treturn ( props ) => {\n\t\tconst { isSelected, color } = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst peers = select( 'isolated/editor' ).getPeers();\n\t\t\t\tconst matchedPeer = Object.values( peers ).find(\n\t\t\t\t\t( peer ) => peer.start?.clientId === props.clientId && peer.end?.clientId === props.clientId\n\t\t\t\t);\n\t\t\t\treturn {\n\t\t\t\t\tisSelected: !! matchedPeer,\n\t\t\t\t\tcolor: matchedPeer?.color,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ props.clientId ]\n\t\t);\n\t\treturn (\n\t\t\t<OriginalComponent\n\t\t\t\t{ ...props }\n\t\t\t\tclassName={ isSelected ? 'is-iso-editor-collab-peer-selected' : undefined }\n\t\t\t\twrapperProps={ {\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t'--iso-editor-collab-peer-block-color': color,\n\t\t\t\t\t},\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t};\n};\n\nexport const addFilterCollabBlockSelection = () => {\n\taddFilter( 'editor.BlockListBlock', 'isolated-block-editor', addSelectionBorders, 9 );\n};\n"],"file":"index.js"}