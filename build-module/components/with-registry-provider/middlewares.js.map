{"version":3,"sources":["../../../src/components/with-registry-provider/middlewares.js"],"names":["refx","multi","flowRight","effects","applyMiddlewares","store","middlewares","enhancedDispatch","Error","chain","middlewareAPI","getState","dispatch","args","map","middleware"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,SAAT,QAA0B,QAA1B;AAEA;AACA;AACA;;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,gBAAT,CAA2BC,KAA3B,EAAmC;AAClC,QAAMC,WAAW,GAAG,CAAEN,IAAI,CAAEG,OAAF,CAAN,EAAmBF,KAAnB,CAApB;;AAEA,MAAIM,gBAAgB,GAAG,MAAM;AAC5B,UAAM,IAAIC,KAAJ,CACL,oEACC,yDAFI,CAAN;AAIA,GALD;;AAMA,MAAIC,KAAK,GAAG,EAAZ;AAEA,QAAMC,aAAa,GAAG;AACrBC,IAAAA,QAAQ,EAAEN,KAAK,CAACM,QADK;AAErB;AACAC,IAAAA,QAAQ,EAAE,CAAE,GAAGC,IAAL,KAAeN,gBAAgB,CAAE,GAAGM,IAAL;AAHpB,GAAtB;AAKAJ,EAAAA,KAAK,GAAGH,WAAW,CAACQ,GAAZ,CAAmBC,UAAF,IAAkBA,UAAU,CAAEL,aAAF,CAA7C,CAAR;AACAH,EAAAA,gBAAgB,GAAGL,SAAS,CAAE,GAAGO,KAAL,CAAT,CAAuBJ,KAAK,CAACO,QAA7B,CAAnB;AAEAP,EAAAA,KAAK,CAACO,QAAN,GAAiBL,gBAAjB;AACA,SAAOF,KAAP;AACA;;AAED,eAAeD,gBAAf","sourcesContent":["/**\n * External dependencies\n */\nimport refx from 'refx';\nimport multi from 'redux-multi';\nimport { flowRight } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport effects from './effects';\n\n/**\n * Applies the custom middlewares used specifically in the editor module.\n *\n * @param {Object} store Store Object.\n *\n * @return {Object} Update Store Object.\n */\nfunction applyMiddlewares( store ) {\n\tconst middlewares = [ refx( effects ), multi ];\n\n\tlet enhancedDispatch = () => {\n\t\tthrow new Error(\n\t\t\t'Dispatching while constructing your middleware is not allowed. ' +\n\t\t\t\t'Other middleware would not be applied to this dispatch.'\n\t\t);\n\t};\n\tlet chain = [];\n\n\tconst middlewareAPI = {\n\t\tgetState: store.getState,\n\t\t// @ts-ignore\n\t\tdispatch: ( ...args ) => enhancedDispatch( ...args ),\n\t};\n\tchain = middlewares.map( ( middleware ) => middleware( middlewareAPI ) );\n\tenhancedDispatch = flowRight( ...chain )( store.dispatch );\n\n\tstore.dispatch = enhancedDispatch;\n\treturn store;\n}\n\nexport default applyMiddlewares;\n"],"file":"middlewares.js"}